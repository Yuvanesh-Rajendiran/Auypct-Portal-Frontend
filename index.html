<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AU Young Professionals Charitable Trust - Application Form</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px 0;
            position: relative;
            overflow-x: hidden;
        }
        
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="25" cy="25" r="1" fill="rgba(255,255,255,0.05)"/><circle cx="75" cy="75" r="1.5" fill="rgba(255,255,255,0.03)"/><circle cx="50" cy="10" r="0.5" fill="rgba(255,255,255,0.07)"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>');
            pointer-events: none;
            z-index: 1;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            overflow: hidden;
            position: relative;
            z-index: 2;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .header {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 40px 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent);
            animation: shimmer 3s infinite;
        }
        
        @keyframes shimmer {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }
        
        .header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 15px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
            position: relative;
            z-index: 1;
        }
        
        .header p {
            font-size: 1.1rem;
            opacity: 0.95;
            margin-bottom: 8px;
            position: relative;
            z-index: 1;
        }
        
        .form-section {
            padding: 40px 30px;
        }
        
        .section {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 16px;
            padding: 30px;
            margin-bottom: 30px;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }
        
        .section::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg, transparent, #667eea, transparent);
            transition: left 0.5s ease;
        }
        
        .section:hover::before {
            left: 100%;
        }
        
        .section:hover {
            transform: translateY(-2px);
            box-shadow: 0 20px 40px -12px rgba(0, 0, 0, 0.15);
            border-color: rgba(102, 126, 234, 0.3);
        }
        
        .section h3 {
            color: #1e3c72;
            font-size: 1.8rem;
            margin-bottom: 25px;
            font-weight: 700;
            position: relative;
            padding-left: 20px;
        }
        
        .section h3::before {
            content: '';
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 4px;
            height: 30px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 2px;
        }
        
        .section h4 {
            color: #2d3748;
            font-size: 1.3rem;
            margin: 25px 0 20px 0;
            font-weight: 600;
            position: relative;
            padding-bottom: 10px;
        }
        
        .section h4::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 50px;
            height: 2px;
            background: linear-gradient(90deg, #667eea, #764ba2);
            border-radius: 1px;
        }
        
        .personal-details-header {
            display: grid;
            grid-template-columns: 1fr auto;
            gap: 40px;
            align-items: start;
            margin-bottom: 30px;
        }
        
        .date-section {
            display: flex;
            flex-direction: column;
        }
        
        .photo-section {
            display: flex;
            justify-content: center;
        }
        
        .photo-upload {
            width: 160px;
            height: 160px;
            border: 3px dashed #e2e8f0;
            border-radius: 16px;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
            background: linear-gradient(135deg, #f7fafc 0%, #edf2f7 100%);
            cursor: pointer;
        }
        
        .photo-upload:hover {
            border-color: #667eea;
            transform: scale(1.02);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.15);
        }
        
        .photo-upload-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            transition: all 0.3s ease;
        }
        
        .photo-upload.has-image .photo-upload-content {
            bottom: 10px;
            top: auto;
            transform: translate(-50%, 0);
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.85rem;
        }
        
        .photo-upload img {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 13px;
        }
        
        .upload-icon {
            width: 32px;
            height: 32px;
            margin-bottom: 8px;
            opacity: 0.6;
        }
        
        .photo-upload input[type="file"] {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            cursor: pointer;
        }
        
        .change-photo-btn {
            display: none;
            background: rgba(255, 255, 255, 0.9);
            color: #2d3748;
            padding: 6px 12px;
            border-radius: 12px;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .photo-upload.has-image .change-photo-btn {
            display: block;
        }
        
        .change-photo-btn:hover {
            background: #667eea;
            color: white;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2d3748;
            font-size: 0.95rem;
        }
        
        input[type="text"], input[type="number"], input[type="tel"], input[type="email"], 
        input[type="date"], textarea, select {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.8);
            margin-bottom: 16px;
        }
        
        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
            transform: translateY(-1px);
        }
        
        .radio-group {
            display: flex;
            gap: 20px;
            margin: 10px 0 16px 0;
            flex-wrap: wrap;
        }
        
        .radio-group input[type="radio"] {
            width: auto;
            margin: 0 8px 0 0;
            accent-color: #667eea;
        }
        
        .radio-group label {
            display: flex;
            align-items: center;
            margin-bottom: 0;
            cursor: pointer;
            padding: 8px 16px;
            border-radius: 8px;
            transition: background-color 0.3s ease;
        }
        
        .radio-group label:hover {
            background-color: rgba(102, 126, 234, 0.05);
        }
        
        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 16px 32px;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: block;
            margin: 30px auto;
            min-width: 200px;
            position: relative;
            overflow: hidden;
        }
        
        button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }
        
        button:hover::before {
            left: 100%;
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
        }
        
        button:active {
            transform: translateY(0);
        }
        
        .required::after {
            content: " *";
            color: #e53e3e;
            font-weight: bold;
        }
        
        .conditional-text {
            font-style: italic;
            color: #718096;
            font-weight: 400;
            font-size: 0.9rem;
            background: rgba(113, 128, 150, 0.1);
            padding: 2px 8px;
            border-radius: 12px;
            border: 1px solid rgba(113, 128, 150, 0.2);
        }
        
        .validation-error {
            color: #e53e3e;
            font-size: 0.875rem;
            margin-top: 4px;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .validation-summary {
            background: linear-gradient(135deg, #fed7d7 0%, #feb2b2 100%);
            border: 1px solid #fc8181;
            color: #c53030;
            padding: 16px 20px;
            border-radius: 12px;
            margin: 20px 0;
            display: none;
            animation: shake 0.5s ease-in-out;
        }
        
        .validation-summary h4 {
            margin: 0 0 10px 0;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .validation-summary ul {
            margin: 0;
            padding-left: 20px;
        }
        
        .validation-summary li {
            margin-bottom: 4px;
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
        
        .field-error {
            border-color: #e53e3e !important;
            background-color: rgba(229, 62, 62, 0.05) !important;
        }
        
        button:disabled {
            background: linear-gradient(135deg, #cbd5e0 0%, #a0aec0 100%);
            cursor: not-allowed;
            transform: none;
        }
        
        button:disabled:hover {
            transform: none;
            box-shadow: none;
        }
        
        .doc-section {
            opacity: 0;
            max-height: 0;
            overflow: hidden;
            transition: all 0.5s ease;
        }
        
        .doc-section.active {
            opacity: 1;
            max-height: 1000px;
            margin-top: 20px;
        }
        
        input[type="file"] {
            margin-bottom: 16px;
            padding: 12px;
            border: 2px dashed #e2e8f0;
            border-radius: 8px;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        input[type="file"]:hover {
            border-color: #667eea;
            background-color: rgba(102, 126, 234, 0.02);
        }
        
        .progress-bar {
            position: fixed;
            top: 0;
            left: 0;
            height: 4px;
            background: linear-gradient(90deg, #667eea, #764ba2);
            z-index: 9999;
            transition: width 0.3s ease;
        }
        
        .floating-elements {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }
        
        .floating-elements::before,
        .floating-elements::after {
            content: '';
            position: absolute;
            border-radius: 50%;
            background: rgba(102, 126, 234, 0.1);
            animation: float 6s ease-in-out infinite;
        }
        
        .floating-elements::before {
            width: 200px;
            height: 200px;
            top: 10%;
            right: 10%;
            animation-delay: 0s;
        }
        
        .floating-elements::after {
            width: 150px;
            height: 150px;
            bottom: 20%;
            left: 15%;
            animation-delay: 3s;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
        }
        
        @media (max-width: 768px) {
            .container {
                margin: 10px;
                border-radius: 16px;
            }
            
            .header {
                padding: 30px 20px;
            }
            
            .header h1 {
                font-size: 1.8rem;
            }
            
            .form-section {
                padding: 20px;
            }
            
            .section {
                padding: 20px;
                margin-bottom: 20px;
            }
            
            .personal-details-header {
                grid-template-columns: 1fr;
                gap: 20px;
                text-align: center;
            }
            
            .photo-upload {
                width: 140px;
                height: 140px;
            }
            
            .radio-group {
                flex-direction: column;
                gap: 10px;
            }
        }
        
        .success-animation {
            animation: success 0.6s ease;
        }
        
        @keyframes success {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .field-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .field-group > div {
            display: flex;
            flex-direction: column;
        }
        
        select {
            appearance: none;
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6,9 12,15 18,9'%3e%3c/polyline%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 12px center;
            background-size: 16px;
            padding-right: 40px;
        }
        
        .declaration-group {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            margin: 20px 0;
        }
        
        .declaration-group input[type="checkbox"] {
            margin-top: 3px;
            accent-color: #667eea;
        }
        
        .declaration-group label {
            font-size: 0.9rem;
            color: #2d3748;
            line-height: 1.4;
        }
        
        #captcha-section {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            margin: 20px 0;
        }

        #captcha-question {
            margin-bottom: 15px;
            font-weight: 600;
            font-size: 1.2rem;
            color: #1a202c;
            letter-spacing: 2px;
        }

        #captcha-answer {
            width: 250px;
            padding: 10px;
            text-align: center;
            border: 2px solid #e2e8f0;
            border-radius: 6px;
            font-size: 1.1rem;
            margin-bottom: 10px;
        }

        #captcha-error {
            display: none;
            color: #e53e3e;
            margin-top: 10px;
        }
        
        .navbar {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            margin-bottom: 20px;
        }
        
        .navbar-brand, .nav-link {
            color: white !important;
        }
        
        .nav-link:hover {
            color: rgba(255, 255, 255, 0.8) !important;
        }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg">
        <div class="container-fluid">
            <a class="navbar-brand" href="index.html">AUYPCT</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse justify-content-center" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link active" href="index.html">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#apply-section">Apply Scholarship</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="track.html">Track Application</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="admin.html">Admin Login</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="trustee.html">Trustee Login</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    
    <div class="progress-bar" id="progressBar"></div>
    <div class="floating-elements"></div>
    
    <div class="container">
        <div class="header">
            <h1>AU YOUNG PROFESSIONALS CHARITABLE TRUST</h1>
            <p>NO ONE HAS EVER BECOME POOR FROM GIVING</p>
            <p>Trust Registration No: 201500130 (Registered at Chennai)</p>
            <p>No. 34-23/810, Aatumanthai Anjalkara Street, Eastgate, Thanjavur - 613 001</p>
            <p>Email: auytrust@gmail.com</p>
        </div>
        
        <div class="form-section" id="apply-section">
            <div class="section">
                <h3>Level 1: Initial Assessment</h3>
                <div class="personal-details-header">
                    <div class="date-section">
                        <label>Application Date <span class="required"></span>:</label>
                        <input type="date" id="level1_application_date" name="level1_application_date" value="2025-09-12" required>
                    </div>
                    <div class="photo-section">
                        <div class="photo-upload">
                            <img id="preview_image" src="" alt="Preview" style="display: none;">
                            <div class="photo-upload-content">
                                <svg class="upload-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                    <polyline points="17,8 12,3 7,8"></polyline>
                                    <line x1="12" y1="3" x2="12" y2="15"></line>
                                </svg>
                                <div id="upload-text">Upload Photo</div>
                                <button class="change-photo-btn" onclick="document.getElementById('passport_photo').click()">Change Photo</button>
                            </div>
                            <input type="file" id="passport_photo" name="passport_photo" accept="image/*" required>
                        </div>
                    </div>
                </div>
                
                <h4>Personal Details</h4>
                <div class="field-group">
                    <div>
                        <label>Applicant Name <span class="required"></span>:</label>
                        <input type="text" id="applicant_name" name="applicant_name" required>
                    </div>
                    <div>
                        <label>Applicant Type <span class="required"></span>:</label>
                        <select id="applicant_type" name="applicant_type" onchange="toggleDetails()" required>
                            <option value="">Select Type</option>
                            <option value="student">Student</option>
                            <option value="working_profession">Working Profession</option>
                            <option value="others">Others</option>
                        </select>
                    </div>
                </div>
                
                <div class="field-group">
                    <div>
                        <label>Date of Birth (DOB) <span class="required"></span>:</label>
                        <input type="date" id="dob" name="dob" required>
                    </div>
                    <div>
                        <div class="radio-group">
                            <label>Gender <span class="required"></span>:</label>
                            <label><input type="radio" name="gender" value="male" required> Male</label>
                            <label><input type="radio" name="gender" value="female"> Female</label>
                        </div>
                    </div>
                </div>
                
                <div class="field-group">
                    <div>
                        <label>Contact Number <span class="required"></span>:</label>
                        <input type="tel" id="contact_number" name="contact_number" oninput="validatePhone(this)" required>
                    </div>
                    <div>
                        <label>Email ID <span class="required"></span>:</label>
                        <input type="email" id="email_id" name="email_id" required>
                    </div>
                </div>
                
                <label>Aadhaar Number <span class="required"></span>:</label>
                <input type="text" id="aadhaar_number" name="aadhaar_number" oninput="validateAadhaar(this)" required>
                
                <div class="section" id="education_details_section" style="display:none;">
                    <h4>Educational Details</h4>
                    <div class="field-group">
                        <div>
                            <label>Class / Degree with Major <span class="required"></span>:</label>
                            <input type="text" id="class_degree" name="class_degree">
                        </div>
                        <div>
                            <label>School / College Name <span class="required"></span>:</label>
                            <input type="text" id="school_college_name" name="school_college_name">
                        </div>
                    </div>
                    <label>Medium <span class="required"></span>:</label>
                    <input type="text" id="medium" name="medium">
                </div>
                
                <div class="section" id="working_details_section" style="display:none;">
                    <h4>Working Details</h4>
                    <div class="field-group">
                        <div>
                            <label>What is your role in working profession? <span class="required"></span>:</label>
                            <input type="text" id="working_role" name="working_role">
                        </div>
                        <div>
                            <label>Organisation Name <span class="required"></span>:</label>
                            <input type="text" id="organisation_name" name="organisation_name">
                        </div>
                    </div>
                    <label>Location of Organisation <span class="required"></span>:</label>
                    <input type="text" id="organisation_location" name="organisation_location">
                </div>
                
                <div class="section" id="other_details_section" style="display:none;">
                    <h4>Other Details</h4>
                    <label>Details about yourself <span class="required"></span>:</label>
                    <textarea id="other_details" name="other_details" rows="3"></textarea>
                </div>
                
                <h4>Referral and Awareness</h4>
                <div class="field-group">
                    <div>
                        <label>Who referred you? & Their Contact No <span class="required"></span>:</label>
                        <input type="text" id="referral" name="referral" required>
                    </div>
                    <div>
                        <label>How did you know about this scheme? <span class="required"></span>:</label>
                        <input type="text" id="scheme_awareness" name="scheme_awareness" required>
                    </div>
                </div>
                
                <h4>Family Financial Details</h4>
                <div class="field-group">
                    <div>
                        <label>What's the source of Income for your family? <span class="required"></span>:</label>
                        <input type="text" id="family_income_source" name="family_income_source" required>
                    </div>
                    <div>
                        <label>Father's Occupation <span class="required"></span>:</label>
                        <input type="text" id="father_occupation" name="father_occupation" required>
                    </div>
                </div>
                
                <div class="field-group">
                    <div>
                        <label>Mother's Occupation <span class="required"></span>:</label>
                        <input type="text" id="mother_occupation" name="mother_occupation" required>
                    </div>
                    <div>
                        <label>Parent Status (e.g., deceased, not in contact, not funding):</label>
                        <input type="text" id="parent_status" name="parent_status">
                    </div>
                </div>
                
                <div class="section" id="fee_payment_section" style="display:none;">
                    <h4>Fee Payment History</h4>
                    <div class="field-group">
                        <div>
                            <label>How were fees paid last year?:</label>
                            <input type="text" id="last_year_payment" name="last_year_payment">
                        </div>
                        <div>
                            <label>Why can't the same be done this year?:</label>
                            <input type="text" id="payment_issue" name="payment_issue">
                        </div>
                    </div>
                </div>
                
                <h4>Academic and Skills</h4>
                <div class="field-group">
                    <div>
                        <label>Academic Performance <span class="conditional-text">(if you are a student)</span>:</label>
                        <input type="text" id="academic_performance" name="academic_performance">
                    </div>
                    <div>
                        <label>Special Skills (e.g., Hifz, orator, writer, sports):</label>
                        <input type="text" id="special_skills" name="special_skills">
                    </div>
                </div>
                
                <h4>Scholarship Request</h4>
                <label>Justify why you need a scholarship? <span class="required"></span>:</label>
                <textarea id="scholarship_justification" name="scholarship_justification" rows="4" required></textarea>
                
                <label>How much is the fees for the current year? & Breakup <span class="required"></span>:</label>
                <textarea id="fee_breakup" name="fee_breakup" rows="4" required></textarea>
                
                <label>How much do you request from us? <span class="required"></span>:</label>
                <input type="number" id="requested_amount" name="requested_amount" step="0.01" oninput="validateNumber(this)" required>
            </div>

            <div class="section">
                <h3>Level 2: Financial Review</h3>
                <div class="field-group">
                    <div>
                        <label>Amount Requesting <span class="required"></span>:</label>
                        <input type="number" id="confirmed_amount" name="confirmed_amount" step="0.01" oninput="validateNumber(this)" required>
                    </div>
                    <div id="high_amount_section" style="display:none;">
                        <label>Why can't you change to a school with relatively low cost?:</label>
                        <input type="text" id="school_change_reason" name="school_change_reason">
                    </div>
                </div>
                
                <div class="field-group">
                    <div>
                        <label>How will you manage the balance money for fees ? <span class="conditional-text">(if you are a student)</span>:</label>
                        <input type="text" id="balance_management" name="balance_management" >
                    </div>
                    <div>
                        <label>School/Organisation Name:</label>
                        <input type="text" id="school_organisation_name" name="school_organisation_name">
                    </div>
                </div>
                
                <label>Note any interesting findings about the applicant:</label>
                <textarea id="interesting_findings" name="interesting_findings" rows="4"></textarea>
            </div>

            <div class="section">
                <h3>Level 3: Documentation</h3>
                <h4>Document Upload Section</h4>
                <label>Request Category <span class="required"></span>:</label>
                <select id="request_category" name="request_category" onchange="toggleDocuments()" required>
                    <option value="">Select Category</option>
                    <option value="educational">Educational Scholarship</option>
                    <option value="women">Women Empowerment</option>
                    <option value="entrepreneur">Entrepreneur</option>
                    <option value="medical">Medical Aid</option>
                </select>
                
                <div id="educational_docs" class="doc-section">
                    <label>Upload Aadhaar/Any ID proof with Address & Photo:</label>
                    <input type="file" name="educational_aadhaar" accept=".pdf,.jpg,.png">
                    <label>Upload Bank Passbook (First Page) - Xerox:</label>
                    <input type="file" name="educational_passbook" accept=".pdf,.jpg,.png">
                    <label>Upload Marksheet/Report Card - Xerox:</label>
                    <input type="file" name="educational_marksheet" accept=".pdf,.jpg,.png">
                    <label>Upload Fees Receipt from School/College:</label>
                    <input type="file" name="educational_fee_receipt" accept=".pdf,.jpg,.png">
                    <label>Upload School ID Card:</label>
                    <input type="file" name="educational_school_id" accept=".pdf,.jpg,.png">
                </div>
                
                <div id="women_docs" class="doc-section">
                    <label>Upload Aadhaar/Any ID proof with Address & Photo:</label>
                    <input type="file" name="women_aadhaar" accept=".pdf,.jpg,.png">
                    <label>Upload Bank Passbook (First Page) - Xerox:</label>
                    <input type="file" name="women_passbook" accept=".pdf,.jpg,.png">
                    <label>Upload Supportive Documents for Business Existence:</label>
                    <input type="file" name="women_business_docs" accept=".pdf,.jpg,.png" multiple>
                </div>
                
                <div id="entrepreneur_docs" class="doc-section">
                    <label>Upload Aadhaar/Address Proof with Photo:</label>
                    <input type="file" name="entrepreneur_aadhaar" accept=".pdf,.jpg,.png">
                    <label>Upload Bank Passbook (First Page) - Xerox:</label>
                    <input type="file" name="entrepreneur_passbook" accept=".pdf,.jpg,.png">
                    <label>Upload Supportive Documents for Business Existence:</label>
                    <input type="file" name="entrepreneur_business_docs" accept=".pdf,.jpg,.png" multiple>
                </div>
                
                <div id="medical_docs" class="doc-section">
                    <label>Upload Aadhaar/Any ID proof with Address & Photo:</label>
                    <input type="file" name="medical_aadhaar" accept=".pdf,.jpg,.png">
                    <label>Upload Bank Passbook (First Page) - Xerox:</label>
                    <input type="file" name="medical_passbook" accept=".pdf,.jpg,.png">
                    <label>Upload Letter from Hospital/Doctor:</label>
                    <input type="file" name="medical_letter" accept=".pdf,.jpg,.png">
                    <label>Upload Receipt/Bills from Hospital/Doctor:</label>
                    <input type="file" name="medical_receipt" accept=".pdf,.jpg,.png">
                </div>
            </div>

            <div class="section">
                <h3>Level 4: Finalization</h3>
                <div style="background: linear-gradient(135deg, #f7fafc 0%, #edf2f7 100%); padding: 25px; border-radius: 12px; margin-bottom: 20px; border-left: 4px solid #667eea;">
                    <h4 style="margin-top: 0; color: #2d3748;">Send hard copies to:</h4>
                    <p style="margin: 8px 0; font-weight: 600; color: #1a202c;">INK CENTER, C/O AU YOUNG PROFESSIONALS CHARITABLE TRUST</p>
                    <p style="margin: 8px 0; color: #4a5568;">34-23/810, ATTUMANTHAI Anjal Kara Street, EASTGATE, Thanjavur - 613001</p>
                    <p style="margin: 8px 0; color: #4a5568; font-weight: 600;">Contact: 84283 66631</p>
                </div>
                
                <label>Any specific comments about the beneficiary:</label>
                <textarea id="beneficiary_comments" name="beneficiary_comments" rows="4"></textarea>
                
                <div class="declaration-group">
                    <input type="checkbox" id="declaration" name="declaration">
                    <label for="declaration">I hereby declare that the personal information furnished above and all the required documents attached along with this application form are very true. I also understand that if any of the information or document found Wrong/Fraudulent, the Trust (Committee Members) has the rights to take back its funds/benefits offered to me and I will be punishable by law.</label>
                </div>
                
                <div id="captcha-section">
                    <h4>Security Check</h4>
                    <p id="captcha-question" style="margin-bottom: 15px; font-weight: 600; font-size: 1.2rem; color: #1a202c; letter-spacing: 2px;"></p>
                    <input type="text" id="captcha-answer" name="captcha-answer" placeholder="Enter the code above" style="width: 250px; padding: 10px; text-align: center; border: 2px solid #e2e8f0; border-radius: 6px; font-size: 1.1rem;" required>
                    <div id="captcha-error" class="validation-error" style="display: none; color: #e53e3e; margin-top: 10px;">⚠️ Incorrect code. Please try again.</div>
                </div>
                
                <div id="validation-summary" class="validation-summary">
                    <h4>⚠️ Please complete the following required fields:</h4>
                    <ul id="validation-list"></ul>
                </div>
                
                <button onclick="submitForm()">
                    <span>Submit Final Application</span>
                </button>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Progress bar functionality
        function updateProgressBar() {
            const scrollTop = window.scrollY;
            const docHeight = document.documentElement.scrollHeight - window.innerHeight;
            const scrollPercent = (scrollTop / docHeight) * 100;
            document.getElementById('progressBar').style.width = scrollPercent + '%';
        }

        window.addEventListener('scroll', updateProgressBar);

        // Enhanced photo upload functionality
        document.getElementById('passport_photo').addEventListener('change', function(e) {
            const file = e.target.files[0];
            const photoUpload = document.querySelector('.photo-upload');
            const previewImage = document.getElementById('preview_image');
            const uploadText = document.getElementById('upload-text');
            
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    previewImage.src = e.target.result;
                    previewImage.style.display = 'block';
                    photoUpload.classList.add('has-image');
                    uploadText.style.display = 'none';
                    
                    // Add success animation
                    photoUpload.classList.add('success-animation');
                    setTimeout(() => photoUpload.classList.remove('success-animation'), 600);
                };
                reader.readAsDataURL(file);
            }
        });

        // Input validation functions
        function validatePhone(input) {
            input.value = input.value.replace(/[^0-9]/g, '').slice(0, 10);
            const errorDiv = input.nextElementSibling && input.nextElementSibling.classList.contains('validation-error') ? input.nextElementSibling : null;
            if (input.value.length !== 10) {
                input.classList.add('field-error');
                if (!errorDiv) {
                    const div = document.createElement('div');
                    div.className = 'validation-error';
                    div.innerHTML = '⚠️ Must be exactly 10 digits';
                    input.parentNode.insertBefore(div, input.nextSibling);
                }
            } else {
                input.classList.remove('field-error');
                if (errorDiv) errorDiv.remove();
            }
        }

        function validateAadhaar(input) {
            input.value = input.value.replace(/[^0-9]/g, '').slice(0, 12);
            const errorDiv = input.nextElementSibling && input.nextElementSibling.classList.contains('validation-error') ? input.nextElementSibling : null;
            if (input.value.length !== 12) {
                input.classList.add('field-error');
                if (!errorDiv) {
                    const div = document.createElement('div');
                    div.className = 'validation-error';
                    div.innerHTML = '⚠️ Must be exactly 12 digits';
                    input.parentNode.insertBefore(div, input.nextSibling);
                }
            } else {
                input.classList.remove('field-error');
                if (errorDiv) errorDiv.remove();
            }
        }

 function validateNumber(input) {
        // Get the current value and store the previous value for comparison
        let currentValue = input.value;
        let previousValue = input.dataset.previousValue || '';

        // Log for debugging
        console.log('Current value:', currentValue, 'Previous value:', previousValue);

        // Allow only digits (no decimals or negative signs)
        let value = currentValue.replace(/[^0-9]/g, '');

        // Limit to a reasonable maximum (e.g., 6 digits)
        if (value.length > 6) {
            value = value.slice(0, 6); // Cap at 6 digits (e.g., 999999)
        }

        // Only update if the value has changed to prevent recursion
        if (value !== previousValue || value !== currentValue) {
            input.value = value;
            input.dataset.previousValue = value; // Store the new value
        }

        const errorDiv = input.nextElementSibling && input.nextElementSibling.classList.contains('validation-error') ? input.nextElementSibling : null;
        if (value === '' || !/^\d*$/.test(value)) {
            input.classList.add('field-error');
            if (!errorDiv) {
                const div = document.createElement('div');
                div.className = 'validation-error';
                div.innerHTML = '⚠️ Must be a whole number';
                input.parentNode.insertBefore(div, input.nextSibling);
            }
        } else {
            input.classList.remove('field-error');
            if (errorDiv) errorDiv.remove();
        }

        // Debugging log after update
        console.log('Final value set to:', input.value);
    }

    // Initialize dataset for existing inputs
    document.querySelectorAll('#requested_amount, #confirmed_amount').forEach(input => {
        input.dataset.previousValue = input.value || '';
    });
        // Enhanced form interactions
        function toggleDetails() {
            const type = document.getElementById('applicant_type').value;
            const educationSection = document.getElementById('education_details_section');
            const workingSection = document.getElementById('working_details_section');
            const feeSection = document.getElementById('fee_payment_section');
            const otherSection = document.getElementById('other_details_section');

            [educationSection, workingSection, feeSection, otherSection].forEach(section => {
                section.style.display = 'none';
                section.style.opacity = '0';
                section.style.transform = 'translateY(-10px)';
            });

            setTimeout(() => {
                if (type === 'student') {
                    educationSection.style.display = 'block';
                    feeSection.style.display = 'block';
                    setTimeout(() => {
                        educationSection.style.opacity = '1';
                        educationSection.style.transform = 'translateY(0)';
                        feeSection.style.opacity = '1';
                        feeSection.style.transform = 'translateY(0)';
                    }, 50);
                } else if (type === 'working_profession') {
                    workingSection.style.display = 'block';
                    setTimeout(() => {
                        workingSection.style.opacity = '1';
                        workingSection.style.transform = 'translateY(0)';
                    }, 50);
                } else if (type === 'others') {
                    otherSection.style.display = 'block';
                    setTimeout(() => {
                        otherSection.style.opacity = '1';
                        otherSection.style.transform = 'translateY(0)';
                    }, 50);
                }
            }, 150);
        }

        function toggleDocuments() {
            const category = document.getElementById('request_category').value;
            const docSections = document.querySelectorAll('.doc-section');
            
            docSections.forEach(section => {
                section.classList.remove('active');
            });
            
            if (category) {
                const targetSection = document.getElementById(`${category}_docs`);
                if (targetSection) {
                    targetSection.classList.add('active');
                }
            }
        }

        // Enhanced amount validation
        document.getElementById('confirmed_amount').addEventListener('input', function() {
            const highAmountSection = document.getElementById('high_amount_section');
            if (this.value > 10000) {
                highAmountSection.style.display = 'block';
                setTimeout(() => {
                    highAmountSection.style.opacity = '1';
                    highAmountSection.style.transform = 'translateY(0)';
                }, 50);
            } else {
                highAmountSection.style.opacity = '0';
                highAmountSection.style.transform = 'translateY(-10px)';
                setTimeout(() => {
                    highAmountSection.style.display = 'none';
                }, 300);
            }
        });

        // Generate random character-based CAPTCHA on load
        function generateCaptcha() {
            const uppercase = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
            const lowercase = 'abcdefghijklmnopqrstuvwxyz';
            const numbers = '0123456789';
            let captcha = '';

            // Ensure at least 2 uppercase, 2 lowercase, and 2 numbers
            captcha += uppercase[Math.floor(Math.random() * uppercase.length)];
            captcha += uppercase[Math.floor(Math.random() * uppercase.length)];
            captcha += lowercase[Math.floor(Math.random() * lowercase.length)];
            captcha += lowercase[Math.floor(Math.random() * lowercase.length)];
            captcha += numbers[Math.floor(Math.random() * numbers.length)];
            captcha += numbers[Math.floor(Math.random() * numbers.length)];

            // Shuffle the string
            captcha = captcha.split('').sort(() => Math.random() - 0.5).join('');

            document.getElementById('captcha-question').textContent = captcha;
            return captcha; // Return the generated CAPTCHA for validation
        }

        // Store correct answer globally
        let correctCaptchaAnswer = generateCaptcha();

        // Update CAPTCHA on refresh or error
        function refreshCaptcha() {
            correctCaptchaAnswer = generateCaptcha();
            document.getElementById('captcha-answer').value = '';
            const captchaError = document.getElementById('captcha-error');
            if (captchaError) captchaError.style.display = 'none';
        }

        // Enhanced form submission with validation
        function submitForm() {
            const validationErrors = validateForm();
            
            if (validationErrors.length > 0) {
                showValidationErrors(validationErrors);
                return false;
            }
            
            // Hide validation summary if shown
            const validationSummary = document.getElementById('validation-summary');
            if (validationSummary) validationSummary.style.display = 'none';
            
            // Add loading state
            const button = document.querySelector('button');
            const originalText = button.innerHTML;
            button.innerHTML = '<span style="opacity: 0.7;">Processing...</span>';
            button.style.transform = 'scale(0.95)';
            button.disabled = true;
            
            // Collect form data
            const formData = new FormData();
            
            // Collect all form inputs
            document.querySelectorAll('input:not([type="file"]), textarea, select').forEach(field => {
                if (field.type === 'radio') {
                    if (field.checked) {
                        formData.append(field.name, field.value);
                    }
                } else {
                    formData.append(field.name, field.value);
                }
            });
            
            // Collect file inputs
            document.querySelectorAll('input[type="file"]').forEach(input => {
                if (input.files.length > 0) {
                    for (let file of input.files) {
                        formData.append(input.name, file);
                    }
                }
            });
            
            // Submit to backend
            fetch('https://auypct-portal-backend.onrender.com/api/applications/submit', {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    button.innerHTML = '<span>Submitted</span>';
                    button.style.background = 'linear-gradient(135deg, #48bb78 0%, #38a169 100%)';
                    button.style.transform = 'scale(1)';
                    button.classList.add('success-animation');
                    
                    // Custom alert with copyable tracking ID
                    const alertDiv = document.createElement('div');
                    alertDiv.innerHTML = `
                        <div style="position: fixed; top: 20px; left: 50%; transform: translateX(-50%); background: #48bb78; color: white; padding: 15px 30px; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); z-index: 1000; display: flex; align-items: center; gap: 10px; animation: slideIn 0.5s ease;">
                            <span>✅ Application Submitted Successfully!</span>
                            <span>Tracking ID: ${data.trackingId}</span>
                            <button onclick="navigator.clipboard.writeText('${data.trackingId}');this.textContent='Copied!';setTimeout(() => this.textContent='Copy ID', 2000);" style="background: rgba(255,255,255,0.2); border: none; color: white; padding: 5px 10px; border-radius: 5px; cursor: pointer;">Copy ID</button>
                        </div>
                        <style>
                            @keyframes slideIn {
                                from { top: -50px; opacity: 0; }
                                to { top: 20px; opacity: 1; }
                            }
                        </style>
                    `;
                    document.body.appendChild(alertDiv);
                    setTimeout(() => alertDiv.remove(), 10000); // Auto-remove after 10s
                } else {
                    throw new Error(data.error || 'Submission failed');
                }
            })
            .catch(error => {
                console.error('Error:', error);
                button.innerHTML = originalText;
                button.style.transform = 'scale(1)';
                button.disabled = false;
                alert('⚠️ Error submitting application: ' + error.message);
                refreshCaptcha();
            });
        }    
        
        function validateForm() {
            const errors = [];
            
            // Clear previous error styles
            document.querySelectorAll('.field-error').forEach(field => {
                field.classList.remove('field-error');
            });
            document.querySelectorAll('.validation-error').forEach(error => {
                error.remove();
            });
            
            // Basic required fields validation
            const requiredFields = [
                { id: 'level1_application_date', label: 'Application Date' },
                { id: 'applicant_name', label: 'Applicant Name' },
                { id: 'applicant_type', label: 'Applicant Type' },
                { id: 'dob', label: 'Date of Birth' },
                { id: 'contact_number', label: 'Contact Number' },
                { id: 'email_id', label: 'Email ID' },
                { id: 'aadhaar_number', label: 'Aadhaar Number' },
                { id: 'referral', label: 'Referral Information' },
                { id: 'scheme_awareness', label: 'Scheme Awareness' },
                { id: 'family_income_source', label: 'Family Income Source' },
                { id: 'father_occupation', label: 'Father\'s Occupation' },
                { id: 'mother_occupation', label: 'Mother\'s Occupation' },
                { id: 'scholarship_justification', label: 'Scholarship Justification' },
                { id: 'fee_breakup', label: 'Fee Breakup' },
                { id: 'requested_amount', label: 'Requested Amount' },
                { id: 'confirmed_amount', label: 'Confirmed Amount' },
                { id: 'request_category', label: 'Request Category' },
                { id: 'captcha-answer', label: 'CAPTCHA Answer' }
            ];
            
            // Check gender radio buttons
            const genderChecked = document.querySelector('input[name="gender"]:checked');
            if (!genderChecked) {
                errors.push('Gender selection is required');
            }
            
            // Check photo upload
            const photoInput = document.getElementById('passport_photo');
            if (!photoInput.files || photoInput.files.length === 0) {
                errors.push('Passport photo is required');
                photoInput.closest('.photo-upload').style.borderColor = '#e53e3e';
            }
            
            // Check declaration checkbox
            const declaration = document.getElementById('declaration');
            if (!declaration.checked) {
                errors.push('You must agree to the declaration');
                declaration.style.outline = '2px solid #e53e3e';
            } else {
                declaration.style.outline = 'none';
            }
            
            requiredFields.forEach(field => {
                const element = document.getElementById(field.id);
                if (element && (!element.value || element.value.trim() === '')) {
                    errors.push(field.label + ' is required');
                    element.classList.add('field-error');
                    
                    const errorDiv = document.createElement('div');
                    errorDiv.className = 'validation-error';
                    errorDiv.innerHTML = '⚠️ This field is required';
                    element.parentNode.insertBefore(errorDiv, element.nextSibling);
                }
            });
            
            // Conditional validation based on applicant type
            const applicantType = document.getElementById('applicant_type').value;
            
            if (applicantType === 'student') {
                const studentFields = [
                    { id: 'class_degree', label: 'Class/Degree' },
                    { id: 'school_college_name', label: 'School/College Name' },
                    { id: 'medium', label: 'Medium' },
                    { id: 'last_year_payment', label: 'Last Year Payment Method' },
                    { id: 'payment_issue', label: 'Payment Issue Explanation' }
                ];
                
                studentFields.forEach(field => {
                    const element = document.getElementById(field.id);
                    if (element && (!element.value || element.value.trim() === '')) {
                        errors.push(field.label + ' is required for students');
                        element.classList.add('field-error');
                        
                        const errorDiv = document.createElement('div');
                        errorDiv.className = 'validation-error';
                        errorDiv.innerHTML = '⚠️ Required for student applicants';
                        element.parentNode.insertBefore(errorDiv, element.nextSibling);
                    }
                });
            } else if (applicantType === 'working_profession') {
                const workingFields = [
                    { id: 'working_role', label: 'Working Role' },
                    { id: 'organisation_name', label: 'Organisation Name' },
                    { id: 'organisation_location', label: 'Organisation Location' }
                ];
                
                workingFields.forEach(field => {
                    const element = document.getElementById(field.id);
                    if (element && (!element.value || element.value.trim() === '')) {
                        errors.push(field.label + ' is required for working professionals');
                        element.classList.add('field-error');
                        
                        const errorDiv = document.createElement('div');
                        errorDiv.className = 'validation-error';
                        errorDiv.innerHTML = '⚠️ Required for working professionals';
                        element.parentNode.insertBefore(errorDiv, element.nextSibling);
                    }
                });
            } else if (applicantType === 'others') {
                const element = document.getElementById('other_details');
                if (!element.value || element.value.trim() === '') {
                    errors.push('Other details are required');
                    element.classList.add('field-error');
                    
                    const errorDiv = document.createElement('div');
                    errorDiv.className = 'validation-error';
                    errorDiv.innerHTML = '⚠️ Please provide details about yourself';
                    element.parentNode.insertBefore(errorDiv, element.nextSibling);
                }
            }
            
            // Validate CAPTCHA
            const captchaInput = document.getElementById('captcha-answer').value.trim().toLowerCase();
            if (captchaInput !== correctCaptchaAnswer.toLowerCase()) {
                errors.push('Incorrect CAPTCHA code');
                document.getElementById('captcha-answer').classList.add('field-error');
                const captchaError = document.getElementById('captcha-error');
                if (captchaError) captchaError.style.display = 'block';
            }
            
            // Validate email format
            const email = document.getElementById('email_id').value;
            if (email && !isValidEmail(email)) {
                errors.push('Please enter a valid email address');
                document.getElementById('email_id').classList.add('field-error');
            }
            
            // Validate phone number format
            const phone = document.getElementById('contact_number').value;
            if (phone && !isValidPhone(phone)) {
                errors.push('Please enter a valid 10-digit phone number');
                document.getElementById('contact_number').classList.add('field-error');
            }
            
            // Validate Aadhaar number format
            const aadhaar = document.getElementById('aadhaar_number').value;
            if (aadhaar && !isValidAadhaar(aadhaar)) {
                errors.push('Please enter a valid 12-digit Aadhaar number');
                document.getElementById('aadhaar_number').classList.add('field-error');
            }
            
            // Validate amount fields
            const requestedAmount = document.getElementById('requested_amount').value;
            if (requestedAmount && !/^\d*\.?\d*$/.test(requestedAmount)) {
                errors.push('Requested Amount must be a valid number');
                document.getElementById('requested_amount').classList.add('field-error');
            }
            
            const confirmedAmount = document.getElementById('confirmed_amount').value;
            if (confirmedAmount && !/^\d*\.?\d*$/.test(confirmedAmount)) {
                errors.push('Confirmed Amount must be a valid number');
                document.getElementById('confirmed_amount').classList.add('field-error');
            }
            
            return errors;
        }
        
        function showValidationErrors(errors) {
            const validationSummary = document.getElementById('validation-summary');
            const validationList = document.getElementById('validation-list');
            
            if (validationSummary && validationList) {
                validationList.innerHTML = '';
                errors.forEach(error => {
                    const li = document.createElement('li');
                    li.textContent = error;
                    validationList.appendChild(li);
                });
                
                validationSummary.style.display = 'block';
                validationSummary.scrollIntoView({ behavior: 'smooth', block: 'center' });
                
                // Add shake animation
                validationSummary.style.animation = 'none';
                setTimeout(() => {
                    validationSummary.style.animation = 'shake 0.5s ease-in-out';
                }, 10);
            }
        }
        
        function isValidEmail(email) {
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return emailRegex.test(email);
        }
        
        function isValidPhone(phone) {
            const phoneRegex = /^[0-9]{10}$/;
            return phoneRegex.test(phone);
        }
        
        function isValidAadhaar(aadhaar) {
            const aadhaarRegex = /^[0-9]{12}$/;
            return aadhaarRegex.test(aadhaar);
        }

        // Modified focus event to prevent auto-scroll
        document.querySelectorAll('input, textarea, select').forEach(field => {
            field.addEventListener('focus', function() {
                // Do not scroll into view automatically
            });
        });

        // Add form validation feedback
        document.querySelectorAll('input[required], textarea[required], select[required]').forEach(field => {
            field.addEventListener('blur', function() {
                if (!this.value.trim()) {
                    this.style.borderColor = '#e53e3e';
                    this.style.boxShadow = '0 0 0 3px rgba(229, 62, 62, 0.1)';
                } else {
                    this.style.borderColor = '#48bb78';
                    this.style.boxShadow = '0 0 0 3px rgba(72, 187, 120, 0.1)';
                    setTimeout(() => {
                        this.style.borderColor = '#e2e8f0';
                        this.style.boxShadow = 'none';
                    }, 2000);
                }
            });
        });

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Enhanced AU Trust Application Form loaded');
            
            // Add entrance animations
            const sections = document.querySelectorAll('.section');
            sections.forEach((section, index) => {
                section.style.opacity = '0';
                section.style.transform = 'translateY(30px)';
                setTimeout(() => {
                    section.style.transition = 'all 0.6s ease';
                    section.style.opacity = '1';
                    section.style.transform = 'translateY(0)';
                }, index * 200);
            });

            // Add refresh button for CAPTCHA
            const captchaSection = document.getElementById('captcha-section');
            const refreshLink = document.createElement('a');
            refreshLink.href = '#';
            refreshLink.textContent = 'Refresh CAPTCHA';
            refreshLink.style.color = '#667eea';
            refreshLink.style.marginLeft = '10px';
            refreshLink.style.cursor = 'pointer';
            refreshLink.onclick = (e) => {
                e.preventDefault();
                refreshCaptcha();
            };
            captchaSection.appendChild(refreshLink);
        });

        // Add file upload feedback
        document.querySelectorAll('input[type="file"]').forEach(input => {
            input.addEventListener('change', function() {
                if (this.files.length > 0) {
                    this.style.borderColor = '#48bb78';
                    this.style.backgroundColor = 'rgba(72, 187, 120, 0.05)';
                    
                    // Create success indicator
                    const indicator = document.createElement('span');
                    indicator.innerHTML = '✓ File selected';
                    indicator.style.color = '#48bb78';
                    indicator.style.fontSize = '0.9rem';
                    indicator.style.marginLeft = '10px';
                    
                    // Remove existing indicator
                    const existingIndicator = this.parentNode.querySelector('.file-indicator');
                    if (existingIndicator) {
                        existingIndicator.remove();
                    }
                    
                    indicator.className = 'file-indicator';
                    this.parentNode.appendChild(indicator);
                }
            });
        });
    </script>
</body>
</html>